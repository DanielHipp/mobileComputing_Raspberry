\documentclass[conference]{IEEEtran}
\IEEEoverridecommandlockouts
% The preceding line is only needed to identify funding in the first footnote. If that is unneeded, please comment it out.
\usepackage{cite}
\usepackage{amsmath,amssymb,amsfonts}
\usepackage{algorithmic}
\usepackage{graphicx}
\usepackage{textcomp}
\usepackage{xcolor}
\def\BibTeX{{\rm B\kern-.05em{\sc i\kern-.025em b}\kern-.08em
    T\kern-.1667em\lower.7ex\hbox{E}\kern-.125emX}}
\begin{document}

\title{Dot Matrix Notifier}

\author{\IEEEauthorblockN{Daniel Hipp}
\IEEEauthorblockA{\textit{Faculty of Computer Science} \\
\textit{HTWG Konstanz}\\
City, Country \\
email address}
\and
\IEEEauthorblockN{Etienne Gramlich}
\IEEEauthorblockA{\textit{Faculty of Computer Science} \\
\textit{HTWG Konstanz}\\
City, Country \\
email address}
\and
\IEEEauthorblockN{Thomas Gn√§dig}
\IEEEauthorblockA{\textit{Faculty of Computer Science} \\
\textit{HTWG Konstanz}\\
City, Country \\
email address}
}

\maketitle

\begin{abstract}
ToDo
\end{abstract}


\begin{IEEEkeywords}
LED, dot matrix, LED matrix, Android, smartphone, WiFi, notification
\end{IEEEkeywords}


\section{Introduction}
The goal of this project is to provide a screen to show notifications and text from a smartphone so that they are better visible. The next step is to provide image thumbnails on the screeen.

An inexpensive replacement for a screen is a dot matrix, that can be easily connected to an Arduino or Raspberry Pi. Due to the networking requirement of the task the Raspberry Pi version 3 seems to be the better choice over an Arduino. The latest Raspberry Pi has multiple network interfaces, such as LAN, WiFi and Bluetooth.


\section{State of the Art}



\section{Proposed approach}
The application needs a server and a client, to receive text and image or to send them, respectively.

Because text can be easily sent over the HTTP protocol, and 16x16 (=256) digits (0 or 1) for the iamges can be easily converted to text, we chose HTTP for transmission between the Raspberry Pi and smartphone.


\subsection{Coose the matrix}
The matrix must be compatible with the Rasbperry Pi, but for testing the matrix itself the compatibility to Arduino is desirable. So the protocol must be either SPI or I2C, because both are supported on Raspberry Pi and Arduino.

It also must not consume more energy than the Raspbery Pi and Arduiono can provide. So it must work at a volate of 3.3V or 5V and must draw at most 50mA and 300mA repectively\cite{b0}.

If the full matrix is not composed of one single panel, the smaller pannels must be addressable individually. So that a wrapper library can be built that acts as a sinle panel and outputs part of the image on the respective sub-panel.

\subsection{Communication between Raspberry Pi and the matrix}

\subsection{Communication between the Client and Server}


\section{Results}

\subsection{Difficulties}
Difficulties arose from the first matrix that we used. It was controlled by a MAX7219 chip, that was supposed to work with both Arduino and Raspberry Pi. Not even the example code from the manufacturer's repository~\cite{b1} worked on our Raspberry Pi 3. Neither a level shifter from 5V to 3.3V nor a separate power supply for the dot matrix did solve the problem. Therefore we moved to dot matrices from Adafruit.

\subsection{Communication}
For communication between Raspberry Pi and smartphone we have two possibilities: either Bluetooth or over a local network. Since the user may already have the smartphone connected to a headphone or headset, we chose to use the smartphone's Wifi interface.

The Raspberry Pi has a LAN and WiFi interface, so we chose to create a new WiFi access point with the Raspberry Pi. This way we can make sure that the Raspberry Pi always has the same IP address, which makes connecting easier. To ensure the normal usage of the smartphone, after it connected to the Raspberry Pi, it must be connected to the existing router by a LAN cable prior to installation. This makes it also easier to set up the Raspberry Pi, because no WiFi passphrase of the original WiFi must be entered. Figure~\ref{FIG:COMMUNICATION} shows an overview of the communication.

\begin{figure}[ht]
\label{FIG:COMMUNICATION}
\centering
\includegraphics[width=0.75\linewidth]{pics/RasPi-MC}
\caption{Communication overview between Raspberry Pi, Smartphone and Router}
\end{figure}

\subsection{WiFi access point}
To function as an access point, the Raspberry Pi needs packages for the access point itself, a DHCP server and for network address translation (NAT). Therefore two daemons are needed, one for using the Wifi interface a an host for the access point (hostapd) and one DHCP daemon.

The host access point daemon is configured to use wlan0 as the network interface (the Raspberry Pi's default one) and WPA2  encryption with a predefined password.

The DHCP server must assign an address to the smartphone connecting to the WiFi. It also communicates the Raspberry Pi as the Gateway so that the smartphone can connect to the internet.

Iptables is configured so that the smartphone in the Raspberry Pi's WiFi can access the internet through NAT at the Pi's LAN interface. This is solved that way, that new connections from the WiFi are accepted, but no new connections from the LAN NIC. Packages at the LAN NIC are only accepted, when they belong to an existing connection.

\subsection{Communication between the Client and Server}
The communication between the server software on the Raspberry Pi and the client on the smartphone is done with HTTP requests. Only strings can be sent to the Raspberry Pi, so images gave to be encoded as strings.

If the received strings only contains zeroes and is 256 (16x16) numbers long, it will be interpreted as an binary image and directly outputted on the dot matrix.

If the message contains also other ASCII characters, it will be interpreted as a string. Special characters (i.e. apersand, space) must be escaped before sending to the Raspberry Pi. The characters are converted with a special font to images and outputted on the matrix.

\subsection{Communication between Raspberry Pi and the matrix}



\section{Conclusion}



\section{Further Work}




\section*{References}
\begin{thebibliography}{00}
\bibitem{b0} Elinux.org, ``RPi Low-level peripherals'' https://elinux.org/Rpi\_Low-level\_peripherals\#General\_Purpose\_Input.2FOutput\_.28GPIO.29, 2019
\bibitem{b1} AZ-Delivery, ``4 x 64er LED Matrix Display'', https://www.az-delivery.de/products/4-x-64er-led-matrix-display?ls=de\&cache=false, 12. 01. 2019
\end{thebibliography}
\end{document}
